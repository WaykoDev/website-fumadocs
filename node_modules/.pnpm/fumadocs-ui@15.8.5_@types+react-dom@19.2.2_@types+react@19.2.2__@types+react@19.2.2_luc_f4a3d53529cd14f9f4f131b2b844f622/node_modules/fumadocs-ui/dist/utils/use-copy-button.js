'use client';
import { useCallback, useEffect, useRef, useState, } from 'react';
export function useCopyButton(onCopy) {
    const [checked, setChecked] = useState(false);
    const callbackRef = useRef(onCopy);
    const timeoutRef = useRef(null);
    callbackRef.current = onCopy;
    const onClick = useCallback(() => {
        if (timeoutRef.current)
            window.clearTimeout(timeoutRef.current);
        const res = Promise.resolve(callbackRef.current());
        void res.then(() => {
            setChecked(true);
            timeoutRef.current = window.setTimeout(() => {
                setChecked(false);
            }, 1500);
        });
    }, []);
    // Avoid updates after being unmounted
    useEffect(() => {
        return () => {
            if (timeoutRef.current)
                window.clearTimeout(timeoutRef.current);
        };
    }, []);
    return [checked, onClick];
}
